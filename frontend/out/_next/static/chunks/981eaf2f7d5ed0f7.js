(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var t=e.i(47167),r=e.i(43476),a=e.i(71645);let l=t.default.env.NEXT_PUBLIC_API_BASE||"/api/v1",s={verified:{icon:"âœ…",label:"ì˜ì—… ì¤‘ í™•ì¸",color:"var(--verified)",bg:"rgba(13,240,122,0.12)"},warning:{icon:"âš ï¸",label:"ì´ì „ ê°€ëŠ¥ì„±",color:"var(--warning)",bg:"rgba(255,171,0,0.12)"},not_found:{icon:"âŒ",label:"íì—… ì¶”ì •",color:"var(--not-found)",bg:"rgba(255,85,85,0.12)"}};function n(){let[e,t]=(0,a.useState)(""),[n,c]=(0,a.useState)([]),[i,d]=(0,a.useState)(-1),[u,x]=(0,a.useState)(null),[m,p]=(0,a.useState)(!1),[f,h]=(0,a.useState)([]),[v,b]=(0,a.useState)(""),[g,w]=(0,a.useState)(""),[y,j]=(0,a.useState)(!1),[N,k]=(0,a.useState)(!1),_=(0,a.useRef)(null),[S,C]=(0,a.useState)(null),[T,E]=(0,a.useState)(null),[R,P]=(0,a.useState)(!0),[$,L]=(0,a.useState)(!0),O=(0,a.useRef)(null),z=(0,a.useRef)(null),D=(0,a.useRef)(null),M=(0,a.useRef)(null),I=(0,a.useRef)(null),U=(0,a.useRef)(null),q=(0,a.useRef)(null),A=(0,a.useRef)(null),K=(0,a.useRef)(null),B=(0,a.useRef)([]);(0,a.useEffect)(()=>{fetch(`${l}/maps-keys`).then(e=>e.json()).then(e=>{e.success&&(e.data?.google_maps_key&&b(e.data.google_maps_key),e.data?.naver_client_id&&w(e.data.naver_client_id))}).catch(()=>{})},[]),(0,a.useEffect)(()=>{if(!v||y)return;let e=document.createElement("script");e.src=`https://maps.googleapis.com/maps/api/js?key=${v}&language=ko`,e.async=!0,e.onload=()=>j(!0),document.head.appendChild(e)},[v,y]),(0,a.useEffect)(()=>{if(!g||N)return;let e=document.createElement("script");e.src=`https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=${g}&submodules=panorama`,e.async=!0,e.onload=()=>k(!0),document.head.appendChild(e)},[g,N]);let V=(0,a.useCallback)(e=>{(t(e),_.current&&clearTimeout(_.current),e.length<2)?c([]):_.current=setTimeout(async()=>{try{let t=await fetch(`${l}/search/autocomplete?q=${encodeURIComponent(e)}`),r=await t.json();c(r.predictions||[]),d(-1)}catch{c([]),d(-1)}},300)},[]),G=(0,a.useCallback)(async t=>{let r=t||e;if(r.trim()){_.current&&(clearTimeout(_.current),_.current=null),p(!0),c([]);try{let e=await fetch(`${l}/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:r})}),t=await e.json();if(t.places?.length>0){let e=t.places[0];x(e),h(t=>[{query:r,name:e.name,status:e.status},...t.filter(e=>e.query!==r)])}}catch(e){console.error(e)}finally{p(!1)}}},[e]);(0,a.useEffect)(()=>{u||(U.current=null,I.current=null,q.current=null,A.current=null,K.current=null,B.current=[],C(null),E(null),P(!0),L(!0))},[u]),(0,a.useEffect)(()=>{if(!u)return;let e=u.original,t=u.naver_location;if(y&&z.current){U.current?(U.current.setCenter(e),U.current.setZoom(17)):U.current=new google.maps.Map(z.current,{center:e,zoom:17,styles:o,disableDefaultUI:!0,zoomControl:!0});let t=U.current;B.current.forEach(e=>e.setMap(null)),B.current=[];let r="verified"===u.status?"#0df07a":"warning"===u.status?"#ffab00":"#ff5555",a=new google.maps.Marker({position:e,map:t,icon:{path:google.maps.SymbolPath.CIRCLE,scale:10,fillColor:r,fillOpacity:.9,strokeColor:"#fff",strokeWeight:2},title:`${u.name} (Google)`});B.current.push(a)}if(N&&O.current&&window.naver&&window.naver.maps){let r=t?new window.naver.maps.LatLng(t.lat,t.lng):new window.naver.maps.LatLng(e.lat,e.lng);I.current?I.current.setCenter(r):I.current=new window.naver.maps.Map(O.current,{center:r,zoom:17}),K.current?K.current.setPosition(r):K.current=new window.naver.maps.Marker({position:r,map:I.current})}},[u,y,N]),(0,a.useEffect)(()=>{if(!u)return;let e=u.original,t=u.naver_location;if(y&&D.current&&new google.maps.StreetViewService().getPanorama({location:e,radius:100,source:google.maps.StreetViewSource.OUTDOOR},(t,r)=>{r===google.maps.StreetViewStatus.OK&&t&&D.current?(P(!0),C(t.imageDate||null),q.current?q.current.setPosition(e):q.current=new google.maps.StreetViewPanorama(D.current,{position:e,pov:{heading:0,pitch:0},zoom:1,addressControl:!1,fullscreenControl:!1,motionTracking:!1})):(P(!1),C(null))}),N&&M.current&&window.naver?.maps?.Panorama){let r=t?new window.naver.maps.LatLng(t.lat,t.lng):new window.naver.maps.LatLng(e.lat,e.lng);try{let e=new window.naver.maps.Panorama(M.current,{position:r,pov:{pan:0,tilt:0,fov:100}});A.current=e,L(!0),window.naver.maps.Event.addListener(e,"pano_changed",()=>{try{let t=e.getPhotographDate();E(t?`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`:null)}catch{E(null)}}),window.naver.maps.Event.addListener(e,"pano_status",e=>{"OK"!==e&&(L(!1),E(null))})}catch{L(!1),E(null)}}},[u,y,N]);let F=u?s[u.status]:null;return(0,r.jsxs)("div",{className:"flex flex-col h-screen bg-[var(--bg)]",children:[(0,r.jsxs)("header",{className:"flex items-center gap-3 px-5 py-3 border-b border-[var(--border)] bg-[var(--panel)] z-30 flex-shrink-0",children:[u&&(0,r.jsx)("button",{onClick:()=>x(null),className:"text-lg text-[var(--text-muted)] hover:text-[var(--text)] transition-colors","aria-label":"ë’¤ë¡œê°€ê¸°",children:"â†"}),(0,r.jsxs)("h1",{className:"text-lg font-bold whitespace-nowrap cursor-pointer",onClick:()=>{x(null),t(""),c([])},children:[(0,r.jsx)("span",{className:"text-[var(--accent)]",children:"Geo"}),"Harness"]}),(0,r.jsxs)("div",{className:"relative flex-1 max-w-xl",children:[(0,r.jsx)("input",{type:"text",value:e,onChange:e=>V(e.target.value),onKeyDown:e=>{if(n.length>0){if("ArrowDown"===e.key){e.preventDefault(),d(e=>(e+1)%n.length);return}if("ArrowUp"===e.key){e.preventDefault(),d(e=>(e-1+n.length)%n.length);return}if("Escape"===e.key){c([]),d(-1);return}if("Enter"===e.key&&i>=0){e.preventDefault();let r=n[i];t(r.main_text),c([]),d(-1),G(r.description);return}}"Enter"===e.key&&(e.preventDefault(),G())},placeholder:"ìž¥ì†Œë¥¼ ê²€ìƒ‰í•˜ì„¸ìš” (ì˜ˆ: ì²œìƒê°€ì˜¥, ë¸”ë£¨ë³´í‹€ ì„±ìˆ˜)",className:"w-full bg-[var(--bg)] border border-[var(--border)] rounded-lg px-4 py-2.5 text-sm placeholder:text-[var(--text-muted)] focus:outline-none focus:border-[var(--accent)] transition-colors"}),n.length>0&&(0,r.jsx)("ul",{className:"absolute top-full left-0 right-0 mt-1 bg-[var(--panel)] border border-[var(--border)] rounded-lg overflow-hidden z-40 shadow-xl",children:n.map((e,a)=>(0,r.jsxs)("li",{className:`px-4 py-2.5 text-sm cursor-pointer transition-colors ${a===i?"bg-[var(--accent-dim)]":"hover:bg-[var(--accent-dim)]"}`,onMouseEnter:()=>d(a),onClick:()=>{t(e.main_text),c([]),d(-1),G(e.description)},children:[(0,r.jsx)("span",{className:"font-medium",children:e.main_text}),(0,r.jsx)("span",{className:"text-[var(--text-muted)] text-xs ml-2",children:e.description.replace(e.main_text,"").replace(/^,?\s*/,"")})]},e.place_id))})]}),(0,r.jsx)("button",{onClick:()=>G(),disabled:m,className:"px-5 py-2.5 bg-[var(--accent)] text-black font-semibold rounded-lg text-sm hover:brightness-110 disabled:opacity-50 transition-all whitespace-nowrap",children:m?"...":"ê²€ìƒ‰"})]}),(0,r.jsxs)("div",{className:"flex-1 flex min-h-0 overflow-hidden",children:[(0,r.jsx)("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:u?(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[F&&(0,r.jsx)("div",{className:"flex-shrink-0 px-6 py-4 border-b border-[var(--border)] animate-fade-in",style:{background:F.bg},children:(0,r.jsxs)("div",{className:"flex items-start gap-4 max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex-shrink-0 text-center",children:[(0,r.jsx)("p",{className:"text-4xl",children:F.icon}),(0,r.jsx)("p",{className:"text-xs font-bold mt-1",style:{color:F.color},children:F.label}),(0,r.jsxs)("p",{className:"text-[10px] text-[var(--text-muted)] mt-0.5",children:[Math.round(100*u.status_confidence),"%"]})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h2",{className:"text-lg font-bold truncate",children:u.name}),(0,r.jsx)("p",{className:"text-xs text-[var(--text-muted)] truncate mt-0.5",children:u.address}),(0,r.jsx)("p",{className:"text-xs mt-1",style:{color:F.color},children:u.status_reason}),u.naver_name&&(0,r.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-x-4 gap-y-1 text-xs text-[var(--text-muted)]",children:[(0,r.jsxs)("span",{children:["ë„¤ì´ë²„ ë§¤ì¹­: ",(0,r.jsx)("strong",{className:"text-[var(--text)]",children:u.naver_name}),null!=u.name_similarity&&(0,r.jsxs)("span",{className:"ml-1 text-[var(--text-muted)]",children:["(ìœ ì‚¬ë„ ",Math.round(100*u.name_similarity),"%)"]})]}),u.naver_category&&(0,r.jsx)("span",{children:u.naver_category}),u.naver_phone&&(0,r.jsxs)("span",{children:["ðŸ“ž ",u.naver_phone]}),u.naver_link&&(0,r.jsx)("a",{href:u.naver_link,target:"_blank",rel:"noopener noreferrer",className:"text-[var(--blue)] hover:underline",children:"ðŸ”— ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤"})]})]})]})}),(0,r.jsxs)("div",{className:"flex-1 grid grid-cols-2 grid-rows-2 min-h-0",children:[(0,r.jsxs)("div",{className:"relative border-r border-b border-[var(--border)]",children:[(0,r.jsx)("div",{className:"absolute top-3 left-3 z-10",children:(0,r.jsx)("span",{className:"bg-[var(--panel)] border border-[var(--border)] text-xs font-bold px-3 py-1.5 rounded-full shadow-lg",children:"ðŸ“ êµ¬ê¸€ ì§€ë„"})}),(0,r.jsx)("div",{ref:z,className:"w-full h-full"})]}),(0,r.jsxs)("div",{className:"relative border-b border-[var(--border)]",children:[(0,r.jsx)("div",{className:"absolute top-3 left-3 z-10",children:(0,r.jsx)("span",{className:`text-xs font-bold px-3 py-1.5 rounded-full shadow-lg ${u.naver_location?"bg-[var(--accent)] text-black":"bg-[var(--panel)] border border-[var(--border)]"}`,children:u.naver_location?"âœ… ë„¤ì´ë²„ í™•ì¸ ì¢Œí‘œ":"ðŸ“ ë„¤ì´ë²„ (ì¢Œí‘œ ì—†ìŒ)"})}),(0,r.jsx)("div",{ref:O,className:"w-full h-full"})]}),(0,r.jsxs)("div",{className:"relative border-r border-[var(--border)]",children:[(0,r.jsxs)("div",{className:"absolute top-3 left-3 z-10 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"bg-[var(--panel)] border border-[var(--border)] text-xs font-bold px-3 py-1.5 rounded-full shadow-lg",children:"ðŸ›£ êµ¬ê¸€ ìŠ¤íŠ¸ë¦¬íŠ¸ë·°"}),S&&(0,r.jsxs)("span",{className:"bg-[var(--panel)] border border-[var(--border)] text-[10px] text-[var(--text-muted)] px-2 py-1 rounded-full shadow-lg",children:["ì´¬ì˜ ",S]})]}),R?(0,r.jsx)("div",{ref:D,className:"w-full h-full"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-[var(--bg)] text-[var(--text-muted)] text-sm",children:"ìŠ¤íŠ¸ë¦¬íŠ¸ë·° ì—†ìŒ"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"absolute top-3 left-3 z-10 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"bg-[var(--panel)] border border-[var(--border)] text-xs font-bold px-3 py-1.5 rounded-full shadow-lg",children:"ðŸ›£ ë„¤ì´ë²„ ê±°ë¦¬ë·°"}),T&&(0,r.jsxs)("span",{className:"bg-[var(--panel)] border border-[var(--border)] text-[10px] text-[var(--text-muted)] px-2 py-1 rounded-full shadow-lg",children:["ì´¬ì˜ ",T]})]}),$?(0,r.jsx)("div",{ref:M,className:"w-full h-full"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-[var(--bg)] text-[var(--text-muted)] text-sm",children:"ê±°ë¦¬ë·° ì—†ìŒ"})]})]})]}):(0,r.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center gap-5 text-center px-6",children:[(0,r.jsx)("p",{className:"text-5xl",children:"ðŸª"}),(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"ì´ ê°€ê²Œ, ì•„ì§ ìžˆì„ê¹Œ?"}),(0,r.jsxs)("p",{className:"text-sm text-[var(--text-muted)] max-w-lg leading-relaxed",children:["êµ¬ê¸€ ì§€ë„ì—ì„œ ì°¾ì€ í•œêµ­ ìž¥ì†Œê°€ ì‹¤ì œë¡œ ì¡´ìž¬í•˜ëŠ”ì§€",(0,r.jsx)("br",{}),"ë„¤ì´ë²„ ë°ì´í„°ì™€ êµì°¨ê²€ì¦í•©ë‹ˆë‹¤."]}),(0,r.jsxs)("p",{className:"text-xs text-[var(--text-muted)] max-w-md",children:["í•œêµ­ ë‚´ êµ¬ê¸€ POIì˜ ",(0,r.jsx)("strong",{className:"text-[var(--warning)]",children:"31%"}),"ëŠ” íì—…Â·ì´ì „ë˜ì—ˆì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤."]}),(0,r.jsx)("div",{className:"flex gap-2 mt-4 flex-wrap justify-center",children:["ë³µì‹ì»¤í”¼","ì•„ë¬´íŠ¼ê²¨ìš¸","ëšì„¬ë¯¸ìˆ ê´€","í•˜ì´ë¼ì¸ ì„±ìˆ˜"].map(e=>(0,r.jsx)("button",{onClick:()=>{t(e),G(e)},className:"px-3 py-1.5 bg-[var(--border)] rounded-full text-xs hover:bg-[var(--accent-dim)] transition-colors",children:e},e))})]})}),(0,r.jsxs)("aside",{className:"w-56 flex-shrink-0 border-l border-[var(--border)] bg-[var(--panel)] flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-3 py-2.5 border-b border-[var(--border)]",children:[(0,r.jsx)("span",{className:"text-xs font-bold text-[var(--text-muted)]",children:"ê²€ìƒ‰ ê¸°ë¡"}),f.length>0&&(0,r.jsx)("button",{onClick:()=>h([]),className:"text-[var(--text-muted)] hover:text-[var(--text)] text-xs transition-colors","aria-label":"ì „ì²´ ì‚­ì œ",children:"âœ•"})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===f.length?(0,r.jsx)("p",{className:"text-xs text-[var(--text-muted)] text-center mt-8 px-3",children:"ê²€ìƒ‰ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤"}):(0,r.jsx)("ul",{children:f.map((e,a)=>(0,r.jsxs)("li",{onClick:()=>{t(e.name),G(e.query)},className:"flex items-center gap-2 px-3 py-2 text-xs cursor-pointer hover:bg-[var(--accent-dim)] transition-colors border-b border-[var(--border)]",children:[(0,r.jsx)("span",{className:"flex-shrink-0",children:s[e.status].icon}),(0,r.jsx)("span",{className:"truncate",children:e.name})]},`${e.query}-${a}`))})})]})]})]})}let o=[{elementType:"geometry",stylers:[{color:"#1a1a2e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#1a1a2e"}]},{elementType:"labels.text.fill",stylers:[{color:"#8888aa"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#2a2a4a"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#3a3a5a"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#0e1626"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#1e1e3e"}]}];e.s(["default",()=>n])}]);